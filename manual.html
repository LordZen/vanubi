<div class="sect1">
<h2 id="_download_amp_installation">Download &amp; Installation</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>downloads installation building make clone</div>
<div class="listingblock">
<div class="title">Download the latest release of Vanubi, build it and launch it</div>
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #aaaaaa">#</span> apt-get install autotools-dev libtool valac libgtksourceview-3.0-dev libvte-2.90-dev
<span style="color: #aaaaaa">$</span> git clone http://github.com/vanubi/vanubi.git
<span style="color: #aaaaaa">$</span> <span style="color: #24909d">cd </span>vanubi
<span style="color: #aaaaaa">$</span> ./autogen.sh
<span style="color: #aaaaaa">$</span> make
<span style="color: #aaaaaa">$</span> gui/vanubi
</pre></div></div></div>
<div class="paragraph"><p>Installation is not yet supported. Vanubi is only tested on Linux systems.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_key_mouse_bindings">Key/mouse bindings</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>keys keybindings mousebindings mouse</div>
<div class="paragraph"><div class="title">Basics of key and mouse bindings</div><p>Most of programming in Vanubi happens on the keyword. It&#8217;s important to have meaningful key bindings. In this regard, Vanubi inherits some of Emacs key bindings.
Key bindings are made up of one or multiple key combinations: for example <span class="monospaced">C-x C-s</span> has to be interpreted as press <span class="monospaced">Ctrl+x</span> then press <span class="monospaced">Ctrl+s</span>, or keep <span class="monospaced">Ctrl+x</span> pressed then press <span class="monospaced">s</span>.
Pressing them at the same time is not needed, the important thing is to press keys in the correct order.</p></div>
<div class="paragraph"><p>Currently supported modifiers are Shift (S-) and Ctrl (C-). Note that <span class="monospaced">C-x k</span>, <span class="monospaced">C-x C-k</span> and <span class="monospaced">C-k</span> and three different key bindings.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_commands">Commands</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>commands help controls</div>
<div class="paragraph"><div class="title">Get help, run commands and learn key bindings</div><p>Vanubi is controlled by commands issued by the user. A command might be activated by a key binding, a mouse action, or programmatically by invoking a command using <span class="monospaced">C-h</span> (the help command).
Not all commands have key bindings, however by using <span class="monospaced">C-h</span> it gets very handy to run unusual commands.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_fuzzy_search">Fuzzy search</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>fuzzy searching</div>
<div class="paragraph"><div class="title">Find and match anything with intelligent search</div><p>All of the matching and search components of Vanubi use fuzzy search when possible. Fuzzy search means you can type only part of the text, and it will match and sort documents accordingly.
For example the query <em>fb</em> will match <em>foobar</em>. Sorting takes in consideration how and where the query pattern matches the document to obtain the best result.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_dealing_with_files">Dealing with files</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>opening save saving files scratch</div>
<div class="paragraph"><div class="title">Open, save and find files in your projects</div><p>At start you are prompted to edit <span class="monospaced">*scratch*</span>. This is not relative to any particular file, it exists as a temporary buffer for your own notetaking.</p></div>
<div class="paragraph"><p>You can open a file for reading or create a new file with <span class="monospaced">open-file</span> (<span class="monospaced">C-x C-f</span>). You can type only part of the file and Vanubi will fuzzy search through file names.
It is also possible to fuzzy search through sub directories. For example <em>/u/b</em> will match all sub directories like <span class="monospaced">/usr/bin</span>, <span class="monospaced">/usr/sbin</span>, <span class="monospaced">/run/dbus</span>, <span class="monospaced">/usr/lib</span>, etc.
The tidle (<span class="monospaced">~</span>) is expand to the user home directory.</p></div>
<div class="paragraph"><p>You can save a new or existing file being edited using <span class="monospaced">save-file</span> (<span class="monospaced">C-x C-s</span>). The file will be overwritten if it already exists.</p></div>
<div class="paragraph"><p>If a file has been edited elsewhere and you want to reload it, it is possible with <span class="monospaced">reload-file</span>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_manage_opened_files">Manage opened files</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>buffers views editors files switch tabs manage</div>
<div class="paragraph"><div class="title">Switch between opened files, split views and more</div><p>A buffer (or editor) is a view of a file being edited. It is possible to split buffers horizontally or vertically (search for such commands with <span class="monospaced">C-h</span>).
This allows you to open two views for the same file.</p></div>
<div class="paragraph"><p>You can switch between files within a view using <span class="monospaced">switch-buffer</span> (<span class="monospaced">C-x b</span>). Note that the first file in the switch buffer completion is the last file you edited in that view. That allows you to quickly switch between two files repeatedly within the same view, and to keep focus on the files you are recently editing.</p></div>
<div class="paragraph"><p>To close a buffer you can issue <span class="monospaced">kill-buffer</span> with <span class="monospaced">C-x k</span>. If the closed buffer was the last visible buffer for a file, the file will be removed from Vanubi and won&#8217;t be visible when switching buffers anymore.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_shell_terminals">Shell terminals</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>compilation shell build projects errors</div>
<div class="paragraph"><div class="title">Open a shell, build your project and jump to errors</div><p>Currently shell terminals can be opened with <span class="monospaced">compile-shell</span>. It will open a shell intended for compilation, though it&#8217;s a general purpose shell.
Each file has its own shell, and the current working directory is saved for that file so that when you reopen Vanubi, the shell will initially open on your last working directory.</p></div>
<div class="paragraph"><p>Vanubi will parse the output of compilation and try to guess possible errors. You can navigate through errors with <span class="monospaced">next-error</span> (<span class="monospaced">C-'</span>) and <span class="monospaced">prev-error</span> (<span class="monospaced">C-0</span>).</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_pipe_shell_commands">Pipe-shell commands</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>pipelining shell commands execution</div>
<div class="paragraph"><div class="title">Pipe text to a shell command and do powerful things</div><p>Pipe-shell commands allow you to pipe the current contents (being saved or not) to a command, and do something with the output of the command.
Additionally, <span class="monospaced">%f</span>, <span class="monospaced">%s</span> and <span class="monospaced">%e</span> are replaced with the filename, selection start and selection end respectively in the shell command.</p></div>
<div class="paragraph"><p>In particular, <span class="monospaced">pipe-shell-replace</span> allows you to create complex scripts to edit the current edited buffer as you wish.
While <span class="monospaced">pipe-shell-clipboard</span> allows you to call commands like <span class="monospaced">pastebinit</span> to share part or the whole buffer, or <span class="monospaced">asciidoc -b html5 - &gt; tmp.html &amp;&amp; xdg-open tmp.html</span> to render an asciidoc in your browser.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_sessions">Sessions</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>sessions restore restoring</div>
<div class="paragraph"><div class="title">Save your workspace and restore it later with sessions</div><p>Vala keeps track of opened files and the current location of your cursor, and saves this information in the <span class="monospaced">default</span> session. After opening Vanubi, you can restore the last session with <span class="monospaced">restore-session</span>.
It is possible to save a named session with <span class="monospaced">save-session</span>, which you can later open with <span class="monospaced">restore-session</span> by specifying the name of the session.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_marks">Marks</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>marks marking jumping code places</div>
<div class="paragraph"><div class="title">Mark your places in the code and jump between locations</div><p>Vanubi keeps a stack of marks among files that are set by the user, and are never implicitly set.
You can set a mark on the current location with <span class="monospaced">mark</span> (<span class="monospaced">C-m</span>). You can go to the last mark set with <span class="monospaced">prev-mark</span> (<span class="monospaced">C-,</span>). Marks are added to a stack, so you can go back to previously set marks, and go forward with <span class="monospaced">next-mark</span> (<span class="monospaced">C-.</span>), until no more marks are available.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_vade_scripting_language">Vade scripting language</h2>
<div class="sectionbody">
<div class="vareskeywords" style='display:none;'>vade language programming scripting scripts</div>
<div class="paragraph"><div class="title">Embed simple expressions anywhere to do useful tasks</div><p>Vade is a simple language for writing expressions in Vanubi.</p></div>
<div class="sect2">
<h3 id="_syntax">Syntax</h3>
<div class="sect3">
<h4 id="_friendly_syntax_explanation">Friendly syntax explanation</h4>
<div class="paragraph"><p>In Vade everything is an expression, and each expression evaluates to a value.</p></div>
<div class="paragraph"><p>An expression is a sequence of sub expressions separated by <span class="monospaced">;</span>.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">expr1</span> <span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">expr2;</span> <span style="color: #d0d0d0">...;</span> <span style="color: #d0d0d0">exprN</span>
</pre></div></div></div>
<div class="paragraph"><p>Expressions can be <span class="monospaced">if</span> expressions, with an optional <span class="monospaced">else</span> branch:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #6ab825; font-weight: bold">if</span> <span style="color: #d0d0d0">(condition)</span> <span style="color: #d0d0d0">true_expr</span> <span style="color: #6ab825; font-weight: bold">else</span> <span style="color: #d0d0d0">false_expr</span>
</pre></div></div></div>
<div class="paragraph"><p>Usual assignment, arithmetic and relational expressions are supported. Assignment is done with <span class="monospaced">=</span> as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">identifier</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">value</span>
</pre></div></div></div>
<div class="paragraph"><p>If an expression is a function (like <span class="monospaced">concat</span>) it is possible to call such a function with arguments separated by <span class="monospaced">,</span> as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">concat(arg1,</span> <span style="color: #d0d0d0">...,</span> <span style="color: #d0d0d0">argN)</span>
</pre></div></div></div>
<div class="paragraph"><p>You can define your own functions as follows:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">func</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">{</span> <span style="color: #d0d0d0">param1</span> <span style="color: #d0d0d0">param2</span> <span style="color: #d0d0d0">|</span> <span style="color: #d0d0d0">body</span> <span style="color: #d0d0d0">}</span>
<span style="color: #d0d0d0">func_without_params</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">{</span> <span style="color: #d0d0d0">body</span> <span style="color: #d0d0d0">}</span>
</pre></div></div></div>
<div class="paragraph"><p>That is, enclosing an expression between braces will create an anonymous function.</p></div>
</div>
<div class="sect3">
<h4 id="_formal_syntax">Formal syntax</h4>
<div class="paragraph"><p>Below a BNF-like description of the language.</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%">expr = seq
seq = nonseq [ &#39;;&#39; seq-expr ]
nonseq = binary | if

if = &#39;if&#39; &#39;(&#39; expr &#39;)&#39; primary [ &#39;else&#39; primary ]

primary = assign
assign = rel [ (&#39;=&#39;|&#39;+=&#39;|&#39;-=&#39;|&#39;*=&#39;|&#39;/=&#39;) assign ]
rel = add [ (&#39;==&#39;|&#39;!=&#39;|&#39;&gt;&#39;|&#39;&gt;=&#39;|&#39;&lt;&#39;|&#39;&lt;=&#39;) rel ]
add = mul [ (&#39;+&#39;|&#39;-&#39;) add ]
mul = unary [ (&#39;*&#39;|&#39;/&#39;) mul ]
unary = simple | (&#39;-&#39;,&#39;++&#39;,&#39;--&#39;) simple

simple = simple-init [ simple-access ]*
simple-init = identifier [ (&#39;++&#39;|&#39;--&#39;) ] | function | &#39;(&#39; nonseq &#39;)&#39; | literal
simple-access = &#39;.&#39; identifier | call
call = &#39;(&#39; [ arguments ] &#39;)&#39;
arguments = nonseq [ &#39;,&#39; nonseq ]*

function = &#39;{&#39; [ parameters &#39;|&#39; ] expr &#39;}&#39;
parameters = identifier [ &#39; &#39; identifier ]*

identifier = ALPHA [ ALPHANUM ]*
literal = num | string
num = DIGIT* [ &#39;.&#39; DIGIT* ]
string = &quot;&#39;&quot; escaped-string &quot;&#39;&quot;
</pre></div></div></div>
</div>
</div>
<div class="sect2">
<h3 id="_semantics">Semantics</h3>
<div class="paragraph"><p>Every expression in Vade evaluates to a value. The type of a value is either a function or a string. If the value is a string, it is interpreted as a number or a boolean depending on the operation performed on the value.</p></div>
<div class="paragraph"><p>An expression is evaluated within a <span class="monospaced">scope</span>. A scope is a mapping between registers (or variables) and values. Registers are referenced by identifiers in the code.</p></div>
<div class="paragraph"><p>An expression made up of a sequence of expressions (<span class="monospaced">expr1; ..., exprN</span>) will evaluate to the value of the last expression.</p></div>
<div class="exampleblock">
<div class="title">Example 1. Using registers and evaluating the last expression</div>
<div class="content">
<div class="paragraph"><p>The expression below will evaluate to <span class="monospaced">10</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">4</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">6</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">a+b</span>
</pre></div></div></div>
</div></div>
<div class="paragraph"><p>Referencing a non-existant register will evaluate to an empty string (or 0 if used as a number).</p></div>
<div class="exampleblock">
<div class="title">Example 2. Using undefined registers</div>
<div class="content">
<div class="paragraph"><p>The expression below will evaluate to <span class="monospaced">1</span>:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">++foo</span>
</pre></div></div></div>
</div></div>
<div class="paragraph"><p>In the Vanubi editor, a <span class="monospaced">base scope</span> is created and all top-level expressions will share the same scope. Therefore a register assigned in an expression will then be reusable within the application when evaluating another expression at a later time.</p></div>
<div class="paragraph"><p>Functions in Vade run in a scope which is created starting from the scope in which they are defined (<span class="monospaced">parent scope</span>).
Assigning a register <span class="monospaced">reg</span> inside a scope with a parent scope follows the rules below:</p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
If <span class="monospaced">reg</span> is defined in the scope, then the value within the scope is updated.
</p>
</li>
<li>
<p>
Otherwise, if <span class="monospaced">reg</span> is defined in the parent (or any ancestor) scope, then <span class="monospaced">reg</span> is updated in that parent (or ancestor) scope.
</p>
</li>
<li>
<p>
If <span class="monospaced">reg</span> is not defined in the parent (or ancestor) scope, then <span class="monospaced">reg</span> will be defined in the current scope (<span class="monospaced">local</span> to the function).
</p>
</li>
</ol></div>
<div class="paragraph"><p>This allows for simple access to top-level registers, yet keeping the definition of new registers local to the function scope.
Parameters of function will define a local register in the function scope, hiding any register in the parent scope.</p></div>
<div class="exampleblock">
<div class="title">Example 3. Global and local registers</div>
<div class="content">
<div class="paragraph"><p>The expression below will evaluate to <span class="monospaced">5</span> (not <span class="monospaced">7</span>) because <span class="monospaced">b</span> is zero in the parent scope:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight" style="background: #202020"><pre style="line-height: 125%"><span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">3</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">f</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">{</span> <span style="color: #d0d0d0">b</span> <span style="color: #d0d0d0">=</span> <span style="color: #3677a9">2</span><span style="color: #d0d0d0">;</span> <span style="color: #d0d0d0">a</span> <span style="color: #d0d0d0">=</span> <span style="color: #d0d0d0">a+b</span> <span style="color: #d0d0d0">};</span> <span style="color: #d0d0d0">f();</span> <span style="color: #d0d0d0">a+b</span>
</pre></div></div></div>
</div></div>
</div>
</div>
</div>
